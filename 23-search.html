
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://github.com/nus-cs1010-2021-s2/website/23-search.html">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>Unit 23: Searching - CS1010 Programming Methodology</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="navy" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unit-23-searching" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://github.com/nus-cs1010-2021-s2/website" title="CS1010 Programming Methodology" class="md-header-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            CS1010 Programming Methodology
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Unit 23: Searching
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://github.com/nus-cs1010-2021-s2/website" title="CS1010 Programming Methodology" class="md-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    CS1010 Programming Methodology
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="index.html" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
    
    <label class="md-nav__link" for="nav-2">
      General
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="General" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="about.html" class="md-nav__link">
      About CS1010
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="outcomes.html" class="md-nav__link">
      Learning Outcomes
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="schedule.html" class="md-nav__link">
      Schedule
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="accounts.html" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="policies.html" class="md-nav__link">
      Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    
    <label class="md-nav__link" for="nav-3">
      Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="01-program.html" class="md-nav__link">
      1. What is a Program?
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="02-algo.html" class="md-nav__link">
      2. Computational Problem & Algorithms
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="03-func.html" class="md-nav__link">
      3. Functions
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="04-type.html" class="md-nav__link">
      4. Types
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="05-first-c.html" class="md-nav__link">
      5. First C Program
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="06-cs1010-io.html" class="md-nav__link">
      6. CS1010 I/O Library
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="07-arithmetic-ops.html" class="md-nav__link">
      7. Arithmetic Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    
    <label class="md-nav__link" for="nav-4">
      Exercises
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Exercises" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Exercises
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="ex00.html" class="md-nav__link">
      0. Echo, Divide, Quadratic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
    
    <label class="md-nav__link" for="nav-5">
      Assignments
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Assignments" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Assignments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="assignment.html" class="md-nav__link">
      Overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="readings.html" class="md-nav__link">
      Readings
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="c-in-cs1010.html" class="md-nav__link">
      C in CS1010
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="library.html" class="md-nav__link">
      CS1010 I/O Library
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="style.html" class="md-nav__link">
      C Style Convention
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="documentation.html" class="md-nav__link">
      C Documentation Guide
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="messages.html" class="md-nav__link">
      Compiler Messages
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12" >
    
    <label class="md-nav__link" for="nav-12">
      Software/Tools
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software/Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon"></span>
        Software/Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="environments.html" class="md-nav__link">
      Programming Environments
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="unix.html" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="clang.html" class="md-nav__link">
      CLang
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="vim.html" class="md-nav__link">
      Vim
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="tmate.html" class="md-nav__link">
      TMate
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="zoom.html" class="md-nav__link">
      Zoom
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linear-search" class="md-nav__link">
    Linear Search
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-search" class="md-nav__link">
    Binary Search
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-is-it-correct" class="md-nav__link">
    Why is it correct?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-efficient-is-binary-search" class="md-nav__link">
    How Efficient is Binary Search
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-23" class="md-nav__link">
    Problem Set 23
  </a>
  
    <nav class="md-nav" aria-label="Problem Set 23">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-231" class="md-nav__link">
    Problem 23.1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="unit-23-searching">Unit 23: Searching</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<p>After this unit students should be familiar with linear search and binary search algorithm, including understanding how the algorithms work, implementing the algorithms, arguing their correctness, and analyzing their running time.</p>
<h2 id="linear-search">Linear Search</h2>
<p>Let's continue the discussion on efficiency on one of the fundamental problems in computing: how to look for something.</p>
<p>You have seen a similar problem in the problem Index in Exercise 3: Given a list of items <span class="arithmatex">\(L\)</span> and query item <span class="arithmatex">\(q\)</span>, find if <span class="arithmatex">\(q\)</span> is in <span class="arithmatex">\(L\)</span>.  </p>
<p>Let's write a function to solve this.  Our function returns -1 if <span class="arithmatex">\(q\)</span> is not in the list.  It returns the position of <span class="arithmatex">\(q\)</span> in the list otherwise.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="nf">search</span><span class="p">(</span><span class="kt">long</span> <span class="n">n</span><span class="p">,</span> <span class="k">const</span> <span class="kt">long</span> <span class="n">list</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="kt">long</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>What is the worst-case running time, expressed in Big-O notation, of the function above?  Suppose the query <span class="arithmatex">\(q\)</span> is not in the list, we will have to scan the whole list, once.  The worst case running time is, therefore, <span class="arithmatex">\(O(n)\)</span>.</p>
<p>Can we do better?  It turns out that this running time <span class="arithmatex">\(O(n)\)</span> is also the best that we can do because we cannot be sure that <span class="arithmatex">\(q\)</span> does not exist until we check every single element in the list.  So there is no shortcut.</p>
<h2 id="binary-search">Binary Search</h2>
<p>But, do we always have to check every element in the list?  It turns out that, like many real-life situations, <em>if the input list is sorted</em>, we do not have to scan through every element.  We can eliminate a huge chunk of the elements based on whether a chosen element is bigger or smaller than <span class="arithmatex">\(q\)</span>.</p>
<p>Suppose that the input list is sorted in increasing order.  Pick a random element <span class="arithmatex">\(x\)</span> from the list.  Any element to the left of <span class="arithmatex">\(x\)</span> must be less than or equal to <span class="arithmatex">\(x\)</span>, and any element to the right of <span class="arithmatex">\(x\)</span> must be greater or equal to <span class="arithmatex">\(x\)</span>. </p>
<p><img alt="property" src="figures/search-and-sort/search-and-sort.001.png" style="width:300px" /></p>
<p>Suppose that <span class="arithmatex">\(q &gt; x\)</span>, then we know that <span class="arithmatex">\(q\)</span> must be to the right of <span class="arithmatex">\(x\)</span>, there is no need to search to the left of <span class="arithmatex">\(x\)</span>.  Otherwise, <span class="arithmatex">\(q &lt; x\)</span>, and <span class="arithmatex">\(q\)</span> must be to the left of <span class="arithmatex">\(x\)</span>, and there is no need to search to the right of <span class="arithmatex">\(x\)</span>.</p>
<p>We can code this out using a recursive function below:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Look for q in list[i]..list[j].</span>
<span class="cm"> *</span>
<span class="cm"> * @pre list is sorted</span>
<span class="cm"> * @return -1 if not found, the position of q in list otherwise.</span>
<span class="cm"> */</span>
<span class="kt">long</span> <span class="nf">search</span><span class="p">(</span><span class="k">const</span> <span class="kt">long</span> <span class="n">list</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">i</span><span class="p">,</span> <span class="kt">long</span> <span class="n">j</span><span class="p">,</span> <span class="kt">long</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kt">long</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">list</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
  <span class="p">}</span> 
  <span class="k">if</span> <span class="p">(</span><span class="n">list</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">mid</span><span class="mi">-1</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
  <span class="p">}</span> 
  <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>We call this function with:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="mi">-1</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
</code></pre></div>
</td></tr></table>
<p>The search algorithm above is called <em>binary search</em> since it repeatedly cut the range of values to search by half.</p>
<h2 id="why-is-it-correct">Why is it correct?</h2>
<p>It is not obvious at first glance that the code above correctly searches for <span class="arithmatex">\(q\)</span> in <span class="arithmatex">\(L\)</span>. </p>
<p>Let's analyze this function more systematically by writing an assertion for this function.  What we want to do here is to eliminate elements in the array that cannot possibly contain <span class="arithmatex">\(q\)</span> -- these are elements outside of the <code>list[i]</code> .. <code>list[j]</code> range.  In other words, we want to assert that </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// { q is not in list[0]..list[i-1] and list[j+1]..list[n-1] }</span>
</code></pre></div>
</td></tr></table>
<p>at the beginning of the function.  In other words, this is a precondition for the function.</p>
<p><img alt="property" src="figures/search-and-sort/search-and-sort.002.png" style="width:400px" /></p>
<p>Let's see if this precondition is true at the beginning.  Since <span class="arithmatex">\(i\)</span> is <span class="arithmatex">\(0\)</span> and <span class="arithmatex">\(j\)</span> is <span class="arithmatex">\(n-1\)</span>, the ranges <code>list[0]..list[i-1]</code> and <code>list[j+1]..list[n-1]</code> are empty, so the assertion is true.</p>
<p>What happen if <span class="arithmatex">\(i &gt; j\)</span>?  This implies that <span class="arithmatex">\(i - 1 &gt; j - 1\)</span>, so the range <code>list[0]</code>..<code>list[i-1]</code> and the range <code>list[j+1]</code>..<code>list[n-1]</code> overlap.  We can be sure that <span class="arithmatex">\(q\)</span> is not anywhere in <code>list</code>. </p>
<p>Let's see how we ensure this assertion is true in the recursive call.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>       <span class="o">:</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">list</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">mid</span><span class="mi">-1</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
  <span class="p">}</span> 
       <span class="o">:</span>
</code></pre></div>
</td></tr></table>
<p>Line 3 of the snippet above is invoked only if <code>list[mid] &gt; q</code>.  Since the array <code>list</code> is sorted, we know for sure that any element in <code>list[mid+1]</code>..<code>list[j]</code> is larger than <span class="arithmatex">\(q\)</span>.  So, <span class="arithmatex">\(q\)</span> cannot be anywhere in that range.  We can assert, between <del class="critic">Line 3 and Line 4</del> Lines 2 and 3 above:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// { q is not in list[0]..list[i-1] and list[mid]..list[n-1] }</span>
</code></pre></div>
</td></tr></table>
<p>Thus, when <del class="critic">Line 4</del> Line 3 is invoked, the same assertion holds true.  You can apply the same argument to the call:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="k">return</span> <span class="nf">search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
</code></pre></div>
</td></tr></table>
<p>To summarize, we annotate the code above with the assertions:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Look for q in list[i]..list[j].</span>
<span class="cm"> *</span>
<span class="cm"> * @pre list is sorted</span>
<span class="cm"> * @pre q is not in list[0]..list[i-1] and list[j+1]..list[n-1]</span>
<span class="cm"> * @return -1 if not found, the position of q in list otherwise.</span>
<span class="cm"> */</span>
<span class="kt">long</span> <span class="nf">search</span><span class="p">(</span><span class="k">const</span> <span class="kt">long</span> <span class="n">list</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">i</span><span class="p">,</span> <span class="kt">long</span> <span class="n">j</span><span class="p">,</span> <span class="kt">long</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// { q is not in list[0]..list[n-1] }</span>
    <span class="k">return</span> <span class="mi">-1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kt">long</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">list</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
  <span class="p">}</span> 
  <span class="k">if</span> <span class="p">(</span><span class="n">list</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// { q is not in list[0]..list[i-1] and list[mid]..list[n-1] }</span>
    <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">mid</span><span class="mi">-1</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
  <span class="p">}</span> 
  <span class="c1">// { q is not in list[0]..list[mid] and list[j]..list[n-1] }</span>
  <span class="k">return</span> <span class="n">search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table></p>
<h2 id="how-efficient-is-binary-search">How Efficient is Binary Search</h2>
<p>We have seen that if the input list is not sorted, then we minimally have to check every element in the list, leading to an <span class="arithmatex">\(O(n)\)</span> algorithm.</p>
<p>With a sorted input and using binary search, however, we can do a better.  Let's consider the worst case, where <span class="arithmatex">\(q\)</span> is not in the list.  Note that every comparison we make, we reduce the range of elements to search by half, until we reach one element.  We start with <span class="arithmatex">\(n\)</span> elements that could possibly contain <span class="arithmatex">\(q\)</span>.  After one comparison, we are left with <span class="arithmatex">\(n/2\)</span>.  After another comparison, we are left with <span class="arithmatex">\(n/4\)</span>, etc.  It takes only <span class="arithmatex">\(O(\log_2 n)\)</span> steps until we reach one element in the list.  This is a big improvement over <span class="arithmatex">\(O(n)\)</span> time: Suppose n is 1,000,000,000,000,000.  Instead of scanning through and comparing one quadrillion elements, we only need to compare 50 of them!</p>
<h2 id="problem-set-23">Problem Set 23</h2>
<h3 id="problem-231">Problem 23.1</h3>
<p><del class="critic"> (a) 
{Rewrite the code for binary search above using a loop instead of recursion.</del></p>
<p>(b) 
Instead of returning the position of the query <code>q</code>, modify <del class="critic">the binary search algorithm in (a)</del> an iterative version of the binary search such that it returns either:</p>
<ul>
<li>a position <code>k</code>, such as <code>a[k] &lt;= q &lt;= a[k+1]</code>. </li>
<li>-1 if <code>q &lt; a[0]</code> </li>
<li><ins class="critic">n-1 if</ins> <code>q &gt; a[n-1]</code></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright by Department of Computer Science, National University of Singapore 2020
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  </body>
</html>